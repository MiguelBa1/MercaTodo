import{s as V,o as cn,c as fn}from"./transform-372bbc4d.js";import{o as pn,q as gn,a as hn,c as dn,e as un}from"./app-af608028.js";import{T as mn}from"./Tableau10-0a7c3835.js";import{w as yn,c as R,a as xn}from"./array-95b0a04c.js";const sn=Math.abs,A=Math.atan2,D=Math.cos,vn=Math.max,rn=Math.min,b=Math.sin,X=Math.sqrt,C=1e-12,Y=Math.PI,Q=Y/2,L=2*Y;function An(r){return r>1?0:r<-1?Y:Math.acos(r)}function ln(r){return r>=1?Q:r<=-1?-Q:Math.asin(r)}function Mn(r){return r.innerRadius}function wn(r){return r.outerRadius}function Rn(r){return r.startAngle}function Tn(r){return r.endAngle}function Pn(r){return r&&r.padAngle}function Cn(r,p,x,M,m,y,g,n){var f=x-r,a=M-p,t=g-m,i=n-y,e=i*f-t*a;if(!(e*e<C))return e=(t*(p-y)-i*(r-m))/e,[r+e*f,p+e*a]}function K(r,p,x,M,m,y,g){var n=r-x,f=p-M,a=(g?y:-y)/X(n*n+f*f),t=a*f,i=-a*n,e=r+t,s=p+i,u=x+t,h=M+i,q=(e+u)/2,c=(s+h)/2,w=u-e,v=h-s,d=w*w+v*v,T=m-y,P=e*h-u*s,k=(v<0?-1:1)*X(vn(0,T*T*d-P*P)),E=(P*v-w*k)/d,I=(-P*w-v*k)/d,N=(P*v+w*k)/d,S=(-P*w+v*k)/d,$=E-q,o=I-c,l=N-q,j=S-c;return $*$+o*o>l*l+j*j&&(E=N,I=S),{cx:E,cy:I,x01:-t,y01:-i,x11:E*(m/T-1),y11:I*(m/T-1)}}function Sn(){var r=Mn,p=wn,x=R(0),M=null,m=Rn,y=Tn,g=Pn,n=null,f=yn(a);function a(){var t,i,e=+r.apply(this,arguments),s=+p.apply(this,arguments),u=m.apply(this,arguments)-Q,h=y.apply(this,arguments)-Q,q=sn(h-u),c=h>u;if(n||(n=t=f()),s<e&&(i=s,s=e,e=i),!(s>C))n.moveTo(0,0);else if(q>L-C)n.moveTo(s*D(u),s*b(u)),n.arc(0,0,s,u,h,!c),e>C&&(n.moveTo(e*D(h),e*b(h)),n.arc(0,0,e,h,u,c));else{var w=u,v=h,d=u,T=h,P=q,k=q,E=g.apply(this,arguments)/2,I=E>C&&(M?+M.apply(this,arguments):X(e*e+s*s)),N=rn(sn(s-e)/2,+x.apply(this,arguments)),S=N,$=N,o,l;if(I>C){var j=ln(I/e*b(E)),z=ln(I/s*b(E));(P-=j*2)>C?(j*=c?1:-1,d+=j,T-=j):(P=0,d=T=(u+h)/2),(k-=z*2)>C?(z*=c?1:-1,w+=z,v-=z):(k=0,w=v=(u+h)/2)}var O=s*D(w),U=s*b(w),F=e*D(T),G=e*b(T);if(N>C){var H=s*D(v),J=s*b(v),W=e*D(d),Z=e*b(d),B;if(q<Y)if(B=Cn(O,U,W,Z,H,J,F,G)){var _=O-B[0],nn=U-B[1],tn=H-B[0],en=J-B[1],on=1/b(An((_*tn+nn*en)/(X(_*_+nn*nn)*X(tn*tn+en*en)))/2),an=X(B[0]*B[0]+B[1]*B[1]);S=rn(N,(e-an)/(on-1)),$=rn(N,(s-an)/(on+1))}else S=$=0}k>C?$>C?(o=K(W,Z,O,U,s,$,c),l=K(H,J,F,G,s,$,c),n.moveTo(o.cx+o.x01,o.cy+o.y01),$<N?n.arc(o.cx,o.cy,$,A(o.y01,o.x01),A(l.y01,l.x01),!c):(n.arc(o.cx,o.cy,$,A(o.y01,o.x01),A(o.y11,o.x11),!c),n.arc(0,0,s,A(o.cy+o.y11,o.cx+o.x11),A(l.cy+l.y11,l.cx+l.x11),!c),n.arc(l.cx,l.cy,$,A(l.y11,l.x11),A(l.y01,l.x01),!c))):(n.moveTo(O,U),n.arc(0,0,s,w,v,!c)):n.moveTo(O,U),!(e>C)||!(P>C)?n.lineTo(F,G):S>C?(o=K(F,G,H,J,e,-S,c),l=K(O,U,W,Z,e,-S,c),n.lineTo(o.cx+o.x01,o.cy+o.y01),S<N?n.arc(o.cx,o.cy,S,A(o.y01,o.x01),A(l.y01,l.x01),!c):(n.arc(o.cx,o.cy,S,A(o.y01,o.x01),A(o.y11,o.x11),!c),n.arc(0,0,e,A(o.cy+o.y11,o.cx+o.x11),A(l.cy+l.y11,l.cx+l.x11),c),n.arc(l.cx,l.cy,S,A(l.y11,l.x11),A(l.y01,l.x01),!c))):n.arc(0,0,e,T,d,c)}if(n.closePath(),t)return n=null,t+""||null}return a.centroid=function(){var t=(+r.apply(this,arguments)+ +p.apply(this,arguments))/2,i=(+m.apply(this,arguments)+ +y.apply(this,arguments))/2-Y/2;return[D(i)*t,b(i)*t]},a.innerRadius=function(t){return arguments.length?(r=typeof t=="function"?t:R(+t),a):r},a.outerRadius=function(t){return arguments.length?(p=typeof t=="function"?t:R(+t),a):p},a.cornerRadius=function(t){return arguments.length?(x=typeof t=="function"?t:R(+t),a):x},a.padRadius=function(t){return arguments.length?(M=t==null?null:typeof t=="function"?t:R(+t),a):M},a.startAngle=function(t){return arguments.length?(m=typeof t=="function"?t:R(+t),a):m},a.endAngle=function(t){return arguments.length?(y=typeof t=="function"?t:R(+t),a):y},a.padAngle=function(t){return arguments.length?(g=typeof t=="function"?t:R(+t),a):g},a.context=function(t){return arguments.length?(n=t??null,a):n},a}function $n(r,p){return p<r?-1:p>r?1:p>=r?0:NaN}function qn(r){return r}function Nn(){var r=qn,p=$n,x=null,M=R(0),m=R(L),y=R(0);function g(n){var f,a=(n=xn(n)).length,t,i,e=0,s=new Array(a),u=new Array(a),h=+M.apply(this,arguments),q=Math.min(L,Math.max(-L,m.apply(this,arguments)-h)),c,w=Math.min(Math.abs(q)/a,y.apply(this,arguments)),v=w*(q<0?-1:1),d;for(f=0;f<a;++f)(d=u[s[f]=f]=+r(n[f],f,n))>0&&(e+=d);for(p!=null?s.sort(function(T,P){return p(u[T],u[P])}):x!=null&&s.sort(function(T,P){return x(n[T],n[P])}),f=0,i=e?(q-a*v)/e:0;f<a;++f,h=c)t=s[f],d=u[t],c=h+(d>0?d*i:0)+v,u[t]={data:n[t],index:f,value:d,startAngle:h,endAngle:c,padAngle:w};return u}return g.value=function(n){return arguments.length?(r=typeof n=="function"?n:R(+n),g):r},g.sortValues=function(n){return arguments.length?(p=n,x=null,g):p},g.sort=function(n){return arguments.length?(x=n,p=null,g):x},g.startAngle=function(n){return arguments.length?(M=typeof n=="function"?n:R(+n),g):M},g.endAngle=function(n){return arguments.length?(m=typeof n=="function"?n:R(+n),g):m},g.padAngle=function(n){return arguments.length?(y=typeof n=="function"?n:R(+n),g):y},g}const bn={id:"top-selling-products",class:"bg-white p-6 rounded shadow flex flex-col items-center"},Bn=un("h2",{class:"font-semibold text-lg mb-4"},"Top Selling Products",-1),Vn=un("div",{id:"topSellingProductsChart"},null,-1),kn=[Bn,Vn],On={__name:"TopSellingProductsChart",props:{top_selling_products:{type:Array,required:!0}},setup(r){const{top_selling_products:p}=r;function x(){const y=Math.min(600,600)/2,g=cn(mn),n=V("#topSellingProductsChart").append("svg").attr("width",600).attr("height",600).append("g").attr("transform","translate("+600/2+","+600/2+")"),f=Sn().outerRadius(y-10).innerRadius(0),a=Nn().sort(null).value(i=>i.total),t=n.selectAll(".arc").data(a(p)).enter().append("g").attr("class","arc").on("mouseover",function(i,e){const s=V(this).select("path").attr("fill"),u=fn(s).brighter(.2);V(this).select("path").attr("fill",u),V("#tooltip").style("left",i.pageX+"px").style("top",i.pageY+"px").classed("show",!0).html(`<span>${e.data.total}</span>`)}).on("mouseout",function(){const i=V(this).attr("data-color");V(this).select("path").attr("fill",i),V("#tooltip").classed("show",!1)});t.append("path").attr("d",f).attr("fill",function(i){const e=g(i.data.product_name);return V(this.parentNode).attr("data-color",e),e}),t.append("text").attr("transform",function(i){const e=f.centroid(i),s=e[0]*1.5,u=e[1]*1.5;return"translate("+s+","+u+")"}).attr("dy",".35em").text(i=>`${i.data.product_name} (${i.data.total})`).style("text-anchor","middle")}return pn(()=>{x()}),gn(()=>{V("#topSellingProductsChart").selectAll("*").remove()}),(M,m)=>(hn(),dn("div",bn,kn))}};export{On as default};
