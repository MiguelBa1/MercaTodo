import{M as g}from"./MainLayout-4ed0b131.js";import{d as w,r as m,K as v,z as b,a as s,k as h,w as a,b as i,u as r,Z as k,c as o,e as t,F as C,f as I,t as _,p as L,m as S,i as q,O as B}from"./app-af608028.js";import{u as j}from"./cart-fd50cb26.js";import E from"./ProductCard-8cf9b5e0.js";import{L as F}from"./LoadingSpinner-3f7cefea.js";import"./ApplicationLogo-4d97a218.js";import"./Dropdown-6c65a629.js";import"./getProductImage-92473f05.js";const N=t("title",null,"Cart",-1),P=t("h2",null,"Cart items",-1),T={key:0,class:"mt-12 max-w-7xl mx-auto"},V={key:0,class:"flex flex-col lg:flex-row items-center lg:items-start gap-6"},$={class:"w-full grid grid-cols-1 gap-2"},M={class:"max-w-md h-fit w-full sm:px-6 lg:px-8 p-4 sm:p-8 shadow sm:rounded-lg"},O={class:"flex justify-between font-bold"},z=t("span",null,"Total:",-1),D={key:1,class:"py-12 flex justify-between"},K={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-6 p-4 sm:p-8 bg-white shadow sm:rounded-lg"},Y=t("h2",{class:"text-2xl font-bold"},"Your cart is empty",-1),Z=t("p",{class:"text-gray-500"},"Looks like you haven't added any items to your cart yet.",-1),A={class:"mt-4"},G={key:1,class:"py-12 flex justify-between"},H={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-6 p-4 sm:p-8 bg-white shadow sm:rounded-lg"},ot={__name:"Index",setup(J){const u=j(),d=w.useToast(),p=m(v().props.cartItems),f=b(()=>{let e=0;return p.value.forEach(n=>{e+=n.product.price*n.quantity}),e}),l=m(!1),x=async()=>{l.value=!0;try{const e=await q.post(route("api.order.store"));e.status===201&&(location.href=e.data.redirect_url)}catch(e){e.response.status===503?d.error(e.response.data.message):d.error("Something went wrong. Please try again later."),l.value=!1}},y=async()=>{B.visit(route("cart.index"),{replace:!0,preserveScroll:!0,only:["cartItems"]})};return(e,n)=>(s(),h(g,null,{header:a(()=>[P]),default:a(()=>[i(r(k),null,{default:a(()=>[N]),_:1}),l.value?(s(),o("div",G,[t("div",H,[i(F)])])):(s(),o("div",T,[r(u).cartItemsCount>0?(s(),o("div",V,[t("div",$,[(s(!0),o(C,null,I(p.value,c=>(s(),h(E,{key:c.product.id,product:c.product,quantity:c.quantity,"fetch-products":y},null,8,["product","quantity"]))),128))]),t("div",M,[t("div",O,[z,t("span",null,"$ "+_(f.value.toFixed(2)),1)]),t("span",null,"Item(s): "+_(r(u).cartItemsCount),1),t("div",{class:"mt-4"},[t("button",{class:"w-full bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",onClick:x}," Proceed to checkout ")])])])):(s(),o("div",D,[t("div",K,[Y,Z,t("div",A,[i(r(S),{href:e.route("home"),class:"w-full bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded"},{default:a(()=>[L(" Continue shopping ")]),_:1},8,["href"])])])]))]))]),_:1}))}};export{ot as default};
