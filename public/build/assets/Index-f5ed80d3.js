import{K as T,r as _,T as k,a as g,k as h,w as r,b as s,u as t,Z as V,e,m as C,p as w,n as P,g as B,h as v,v as x,i as D}from"./app-af608028.js";import{M as R}from"./MainLayout-4ed0b131.js";import{_ as b}from"./InputLabel-47059b8e.js";import{_ as y}from"./InputError-e63fa01d.js";import{_ as S}from"./PrimaryButton-76370c3c.js";import{_ as Y}from"./Modal-49f06bdc.js";import"./ApplicationLogo-4d97a218.js";import"./Dropdown-6c65a629.js";import"./cart-fd50cb26.js";const N=e("title",null,"Reports",-1),O={class:"grid gap-3 p-6 lg:p-12 max-w-7xl mx-auto mt-7 shadow rounded-lg"},$={class:"flex flex-col sm:flex-row justify-between"},j=e("h1",{class:"text-xl font-bold"},"Generate Reports",-1),F=e("div",{class:"my-5"},[e("p",null," You are about to generate a report, which will correspond to the entered date range. The report includes information about the following: "),e("ul",{class:"list-disc pl-5"},[e("li",null,"Total Sales"),e("li",null,"Total Orders"),e("li",null,"Most Sold Product"),e("li",null,"Products Sold Per Category"),e("li",null,"Sales By Month"),e("li",null,"Top Selling Products")])],-1),G=["onSubmit"],I=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",class:"w-6 h-6 text-gray-600 hover:text-gray-900"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),L=[I],A=e("h2",{class:"text-lg font-semibold mb-2"},"Report Generation in Process",-1),U=e("p",{class:"text-sm text-gray-600"},"Your report is being generated. Any updates on the status of this process will be sent to your email.",-1),ee={__name:"Index",setup(K){const{lastReport:d}=T().props,n=_(!1),u=_(""),c=()=>{n.value=!0},m=()=>{n.value=!1},p=new Date,f=new Date;f.setFullYear(p.getFullYear()-1);const o=k({start_date:f.toISOString().split("T")[0],end_date:p.toISOString().split("T")[0]}),M=async()=>{try{const a=await D.post(route("api.admin.report.generate"),o.data());a.status===200&&(u.value=a.data.message,c(),o.reset())}catch(a){a.response.status===422?o.errors=a.response.data.errors[0]:(u.value="Something went wrong. Please try again later.",c())}};return(a,l)=>(g(),h(R,null,{default:r(()=>[s(t(V),null,{default:r(()=>[N]),_:1}),e("div",O,[e("div",$,[j,t(d)?(g(),h(t(C),{key:0,href:a.route("admin.report.show",t(d).id)},{default:r(()=>[s(S,null,{default:r(()=>[w("View Last Report")]),_:1})]),_:1},8,["href"])):P("",!0)]),F,e("div",null,[e("form",{onSubmit:B(M,["prevent"]),class:"flex flex-col md:flex-row justify-between"},[e("div",null,[s(b,{class:"mb-3",for:"from",value:"From"}),v(e("input",{id:"from","onUpdate:modelValue":l[0]||(l[0]=i=>t(o).start_date=i),class:"rounded-sm border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",name:"from",type:"date"},null,512),[[x,t(o).start_date]]),s(y,{message:t(o).errors.start_date,class:"mt-2"},null,8,["message"])]),e("div",null,[s(b,{class:"mb-3",for:"to",value:"To"}),v(e("input",{id:"to","onUpdate:modelValue":l[1]||(l[1]=i=>t(o).end_date=i),class:"rounded-sm border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50",name:"to",type:"date"},null,512),[[x,t(o).end_date]]),s(y,{message:t(o).errors.end_date,class:"mt-2"},null,8,["message"])]),e("div",null,[s(S,{class:"mt-5",type:"submit"},{default:r(()=>[w("Generate")]),_:1})])],40,G)])]),s(Y,{show:n.value,onClose:m},{default:r(()=>[e("div",{class:"p-6 relative"},[e("button",{onClick:m,class:"absolute right-0 top-0 p-2"},L),A,U])]),_:1},8,["show"])]),_:1}))}};export{ee as default};
